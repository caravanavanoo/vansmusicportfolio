const albumData = {
            bfiafl: {
                title: "Being Funny in a Foreign Language",
                artist: "The 1975 (2022)",
                image: "https://upload.wikimedia.org/wikipedia/en/9/94/The_1975_-_Being_Funny_in_a_Foreign_Language.png",
                tracks: [
                    { 
                        title: "The 1975", 
                        spotifyUrl: "https://open.spotify.com/track/7omxuGYsym1n2RlVf86OF9",
                        analysis: "Matty delivers a self-referential, confessional overture that reintroduces the band with winking honesty and emotional vulnerability."
                    },
                    { 
                        title: "Happiness", 
                        spotifyUrl: "https://open.spotify.com/track/35lxFAny9XDBkvE6r9j4uG",
                        analysis: "A burst of joyful, sax-colored energy that expresses pure affection and captures the warmth of being fully present in love."
                    },
                    { 
                        title: "Looking for Somebody (To Love)", 
                        spotifyUrl: "https://open.spotify.com/track/1kuArMFi0pMPYDMJKb1UYq",
                        analysis: "A deceptively upbeat track that uses bright pop to contrast a chilling narrative about identity, alienation, and violent longing."
                    },
                    { 
                        title: "Part of the Band", 
                        spotifyUrl: "https://open.spotify.com/track/0gplL1WMoJ6iYaPgMCL0gX",
                        analysis: "A lyrically dense and musically off-kilter chronicle of ego, self-awareness, and artistic evolution wrapped in poetic humor."
                    },
                    { 
                        title: "All I Need to Hear", 
                        spotifyUrl: "https://open.spotify.com/track/13r6qygrM6A1F4jg8nayz4",
                        analysis: "A sparse, piano-driven ballad that expresses the simple yearning for reassurance and emotional certainty."
                    },
                    { 
                        title: "Wintering", 
                        spotifyUrl: "https://open.spotify.com/track/2xCNzEveRcmz5xjGDhM64u",
                        analysis: "A fast-paced, conversational snapshot of family chaos during the holidays that mixes humor with genuine affection."
                    },
                    { 
                        title: "I'm in Love with You", 
                        spotifyUrl: "https://open.spotify.com/track/3xi8t0qSWp9Ha7UhqxVVfK",
                        analysis: "An earnest, uncomplicated declaration of affection that embraces emotional directness instead of metaphor."
                    },
                    { 
                        title: "When We Are Together", 
                        spotifyUrl: "https://open.spotify.com/track/0q3KEEwGsjAKFqDGKe1D2H",
                        analysis: "A softly resigned acoustic reflection on a relationship's tiny moments, regrets, and bittersweet tenderness."
                    },
                    { 
                        title: "About You", 
                        spotifyUrl: "https://open.spotify.com/track/2RJZVwvOPJDbeW48Rm6pEi",
                        analysis: "A hazy, dreamlike piece that evokes lingering memories of past love and the echoes of emotional ghosts."
                    },
                    { 
                        title: "Oh Caroline", 
                        spotifyUrl: "https://open.spotify.com/track/2KP6jC0C6fgZiN6TmwS5nx",
                        analysis: "A glossy synth-pop plea that masks heartbreak beneath danceable nostalgia and romantic desperation."
                    },
                    { 
                        title: "Human Too", 
                        spotifyUrl: "https://open.spotify.com/track/1WrEcuIBzLFjl5BZCOCkpB",
                        analysis: "A gentle confession of imperfection that invites compassion and forgiveness toward oneself and others."
                    }
                ]
            },
            noacf: {
                title: "Notes on a Conditional Form",
                artist: "The 1975 (2020)",
                image: "https://upload.wikimedia.org/wikipedia/en/1/1a/The_1975_-_Notes_on_a_Conditional_Form.png",
                tracks: [
                    { title: "The 1975", spotifyUrl: "https://open.spotify.com/track/0YtmwGMUPaBIEuJs0FNiDm", analysis: "Greta Thunberg's stark call-to-action grounds the album in political urgency, transforming the band's intro format into a moral statement." },
                    { title: "People", spotifyUrl: "https://open.spotify.com/track/39sJbSgJmIrB9J1pkRbpaX", analysis: "A frantic punk scream of frustration at societal apathy, urging listeners to wake up and engage with the world's crises." },
                    { title: "The End (Music for Cars)", spotifyUrl: "https://open.spotify.com/track/3YPYIrAHHbpZyRemcUmXii", analysis: "A melancholy orchestral interlude that creates a hollow emotional space for contemplation." },
                    { title: "Frail State of Mind", spotifyUrl: "https://open.spotify.com/track/5FbfZj2ZyTSu6RNeJ2Q0bj", analysis: "A fluttering electronic confession of anxiety, capturing the uneasy social withdrawal of modern emotional life." },
                    { title: "Streaming", spotifyUrl: "https://open.spotify.com/track/5tH6qN6LmaL7XlQxdF1Ivk", analysis: "A drifting instrumental that evokes a feeling of digitized consciousness floating through the intangible online sphere." },
                    { title: "The Birthday Party", spotifyUrl: "https://open.spotify.com/track/0mQCP1eJfiFqjGMUGmDCKW", analysis: "A deadpan folk narrative about social awkwardness and escapism disguised behind polite small-talk scenes." },
                    { title: "Yeah I Know", spotifyUrl: "https://open.spotify.com/track/1cQGABj4OmEXuCkz16IDbI", analysis: "A looping, minimal techno confessional that mirrors obsessive internal monologues and emotional deflection." },
                    { title: "Then Because She Goes", spotifyUrl: "https://open.spotify.com/track/5T7tBJTlZb2CpJu6YUWP5y", analysis: "A soft, shoegaze-infused sigh of post-breakup longing, capturing the ache of unresolved feeling." },
                    { title: "Jesus Christ 2005 God Bless America", spotifyUrl: "https://open.spotify.com/track/1wBJqKnHk7k8fEqGKnDQE0", analysis: "A tender, conflicted duet that explores spirituality, forbidden desire, and suppressed identity." },
                    { title: "Roadkill", spotifyUrl: "https://open.spotify.com/track/5dVgr4CZU6IFo49J6cxWvW", analysis: "A wry, country-tinged travel diary that blends humor, discomfort, and vulnerability from touring life." },
                    { title: "Me & You Together Song", spotifyUrl: "https://open.spotify.com/track/1NdGQYT9KKLaNMKXzyUuZW", analysis: "A sugary, 2000s-indie-rom-com-style fantasy of unrequited love and innocent emotional yearning." },
                    { title: "I Think There's Something You Should Know", spotifyUrl: "https://open.spotify.com/track/7tIkx8gzBXmMRLqOyLUn4D", analysis: "A processed confession that wrestles with telling the truth while hiding behind stylistic distortion." },
                    { title: "Nothing Revealed / Everything Denied", spotifyUrl: "https://open.spotify.com/track/4JvqgcbQH39OJq0OAFhKU6", analysis: "A dramatic deconstruction of honesty and persona that strips away pretense and self-mythology." },
                    { title: "If You're Too Shy (Let Me Know)", spotifyUrl: "https://open.spotify.com/track/4iKsHVWuMZ4FNCPCRDlAV8", analysis: "A euphoric retro anthem about digital-age flirtation, craving intimacy while hiding behind screens." },
                    { title: "Playing on My Mind", spotifyUrl: "https://open.spotify.com/track/67Bp0vgKmkXl3VkBGNp0ow", analysis: "A quiet confession of emotional baggage and regret, delivered with fragile intimacy." },
                    { title: "Having No Head", spotifyUrl: "https://open.spotify.com/track/4n8PXzxCaxj7lU5RBVZNyb", analysis: "An expansive, evolving electronic piece that dissolves structure to portray a feeling of emotional surrender." },
                    { title: "Shiny Collarbone", spotifyUrl: "https://open.spotify.com/track/2Sc2qlqXrLRN4Vu6kZR6jj", analysis: "A rhythmic, almost purely textural experiment that prioritizes bodily feeling over narrative meaning." },
                    { title: "Tonight (I Wish I Was Your Boy)", spotifyUrl: "https://open.spotify.com/track/7jqS2bYqc73VNNtI02D0RJ", analysis: "A nostalgic emotional plea that mixes melancholy yearning with a rich, sample-layered sonic texture." },
                    { title: "What Should I Say", spotifyUrl: "https://open.spotify.com/track/2EI6mAlHx8Jquy3KzZFRXD", analysis: "A vocoder-washed expression of romantic indecision and hesitation, blurring human and artificial emotion." },
                    { title: "Bagsy Not in Net", spotifyUrl: "https://open.spotify.com/track/2hKXWufBXH0f22OdI46a7G", analysis: "A tender admission of self-awareness and growth, reaching toward emotional maturation." },
                    { title: "Don't Worry", spotifyUrl: "https://open.spotify.com/track/5KmJQOK6SNmJLFtANm9GZ4", analysis: "A comforting lullaby of reassurance and familial warmth, offering safety and presence." },
                    { title: "Guys", spotifyUrl: "https://open.spotify.com/track/1fHcIWdGT9jrP9khk5FzM0", analysis: "An affectionate tribute to lifelong friendship, revealing that the deepest love story is the band itself." }
                ]
            },
            abiior: {
                title: "A Brief Inquiry into Online Relationships",
                artist: "The 1975 (2018)",
                image: "https://upload.wikimedia.org/wikipedia/en/5/51/The_1975_-_A_Brief_Inquiry_into_Online_Relationships.png",
                tracks: [
                    { title: "The 1975", spotifyUrl: "https://open.spotify.com/track/1NAmidLcluVLbIObjJ32WI", analysis: "A digitized, glitched-out self-intro that immediately frames the album around identity and performative selfhood." },
                    { title: "Give Yourself a Try", spotifyUrl: "https://open.spotify.com/track/4rmIfFUZhhi9sS5IYtpkXw", analysis: "A therapy-like pep-talk set to a jagged post-punk beat, encouraging self-acceptance through life's messy mistakes." },
                    { title: "TOOTIMETOOTIMETOOTIME", spotifyUrl: "https://open.spotify.com/track/1z7rxZ4NW86zfO2pX54PPV", analysis: "A playful dance-pop loop that hides insecurity behind repetition and flirtatious deflection." },
                    { title: "How to Draw / Petrichor", spotifyUrl: "https://open.spotify.com/track/55TZpzDZNLZVNYoZj7lTgb", analysis: "A serene, sketch-like beginning dissolving into digital abstraction, symbolizing blurred boundaries between self and simulation." },
                    { title: "Love It If We Made It", spotifyUrl: "https://open.spotify.com/track/2aVx2qVeKI0zYJDXWJh8xy", analysis: "A breathless emotional collage of global chaos that still clings to hope and communal survival." },
                    { title: "Be My Mistake", spotifyUrl: "https://open.spotify.com/track/1o66BQPXyjmGY7rTWVyZ7s", analysis: "A hushed acoustic confession about using intimacy to cope with loneliness and emotional confusion." },
                    { title: "Sincerity Is Scary", spotifyUrl: "https://open.spotify.com/track/6HguG9HRb1Ke1bhihfE4m8", analysis: "A jazzy plea for authentic emotional expression in a culture addicted to irony and emotional armor." },
                    { title: "I Like America & America Likes Me", spotifyUrl: "https://open.spotify.com/track/5aUKHpAvWdtzJWGIXxT0f9", analysis: "A panicked stream-of-consciousness rant about gun culture, death anxiety, and millennial disillusionment." },
                    { title: "The Man Who Married a Robot / Love Theme", spotifyUrl: "https://open.spotify.com/track/3f4SQvCwJWVzRJ8CjnHG9p", analysis: "A sterile narration of a human forming a 'relationship' with the internet, exposing our dependence on digital companionship." },
                    { title: "Inside Your Mind", spotifyUrl: "https://open.spotify.com/track/2KFxL4OQlC85BoLcvqJPQV", analysis: "A melodramatic meditation on emotional obsession and wanting total access to another person's internal world." },
                    { title: "It's Not Living (If It's Not with You)", spotifyUrl: "https://open.spotify.com/track/3TgMcrV32NUKjEG2ujn9eh", analysis: "A glittering pop anthem about addiction and longing, balancing darkness with melodic brightness." },
                    { title: "Surrounded by Heads and Bodies", spotifyUrl: "https://open.spotify.com/track/3KOGHjAPn2bTTaLEwXjIK7", analysis: "A quiet hospital-memory vignette reflecting on vulnerability, humanity, and healing." },
                    { title: "Mine", spotifyUrl: "https://open.spotify.com/track/6X0wlmn6RbCSEBq6pjw13m", analysis: "A soft, jazz-tinged love song celebrating the security and simplicity of domestic closeness." },
                    { title: "I Couldn't Be More in Love", spotifyUrl: "https://open.spotify.com/track/5ZsMGaKiJvTVNKvvMXFZmL", analysis: "A soaring, R&B-style love plea drenched in sincerity, vocal passion, and emotional intensity." },
                    { title: "I Always Wanna Die (Sometimes)", spotifyUrl: "https://open.spotify.com/track/6GhwVvh09kfcOCTH8YqE2U", analysis: "A cinematic alt-rock finale that acknowledges suicidal despair while still choosing survival and hope." }
                ]
            }
        };

        let currentOpenAnalysis = null;

        const preview = document.getElementById('preview');
        const portfolio = document.getElementById('portfolio');
        const intro = document.querySelector('.intro');
        const albums = document.querySelectorAll('.album');
        const modal = document.getElementById('songModal');
        const closeBtn = document.querySelector('.close-btn');

        preview.addEventListener('click', () => {
            preview.style.opacity = '0';
            setTimeout(() => {
                preview.style.display = 'none';
                portfolio.style.display = 'block';
                intro.style.animation = "fadeIn 2s ease forwards";

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach((entry) => {
                        if (entry.isIntersecting) {
                            entry.target.style.animation = "fadeIn 1.5s ease forwards";
                            observer.unobserve(entry.target);
                        }
                    });
                }, { threshold: 0.2 });

                albums.forEach((album) => {
                    observer.observe(album);
                });
            }, 1000);
        });

        albums.forEach(album => {
            album.addEventListener('click', () => {
                const albumId = album.dataset.album;
                const data = albumData[albumId];
                
                document.getElementById('modalTitle').textContent = data.title;
                document.getElementById('modalArtist').textContent = data.artist;
                
                const songList = document.getElementById('songList');
                songList.innerHTML = '';
                
                data.tracks.forEach((track, index) => {
                    const li = document.createElement('li');
                    li.className = 'song-item';
                    
                    const songContent = document.createElement('div');
                    songContent.style.display = 'flex';
                    songContent.style.alignItems = 'center';
                    songContent.style.justifyContent = 'space-between';
                    songContent.style.width = '100%';
                    
                    const songInfo = document.createElement('div');
                    songInfo.className = 'song-info';
                    songInfo.innerHTML = `
                        <span class="song-number">${index + 1}</span>
                        <span class="song-title">${track.title}</span>
                    `;
                    
                    const buttonsContainer = document.createElement('div');
                    buttonsContainer.className = 'song-buttons';
                    
                    // Listen Button - Opens Spotify directly
                    const listenBtn = document.createElement('button');
                    listenBtn.className = 'song-btn listen-btn';
                    listenBtn.textContent = 'Listen';
                    listenBtn.onclick = (e) => {
                        e.stopPropagation();
                        if (track.spotifyUrl) {
                            window.open(track.spotifyUrl, '_blank');
                        } else {
                            alert('Spotify link not available.');
                        }
                    };
                    
                    // Read Button
                    const readBtn = document.createElement('button');
                    readBtn.className = 'song-btn read-btn';
                    readBtn.textContent = 'Read';
                    readBtn.onclick = (e) => {
                        e.stopPropagation();
                        
                        // Close previously open analysis
                        if (currentOpenAnalysis && currentOpenAnalysis !== analysisPanel) {
                            currentOpenAnalysis.classList.remove('active');
                        }
                        
                        // Toggle current analysis
                        analysisPanel.classList.toggle('active');
                        currentOpenAnalysis = analysisPanel.classList.contains('active') ? analysisPanel : null;
                    };
                    
                    buttonsContainer.appendChild(listenBtn);
                    buttonsContainer.appendChild(readBtn);
                    
                    songContent.appendChild(songInfo);
                    songContent.appendChild(buttonsContainer);
                    
                    // Analysis Panel
                    const analysisPanel = document.createElement('div');
                    analysisPanel.className = 'analysis-panel';
                    analysisPanel.innerHTML = `
                        <h4>Analysis: ${track.title}</h4>
                        <p>${track.analysis}</p>
                    `;
                    
                    li.appendChild(songContent);
                    li.appendChild(analysisPanel);
                    songList.appendChild(li);
                });
                
                modal.style.display = 'block';
            });
        });

        closeBtn.addEventListener('click', () => {
            modal.style.display = 'none';
            currentOpenAnalysis = null;
        });

        window.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.style.display = 'none';
                currentOpenAnalysis = null;
            }
        });